# LAFTER.ORG - VERSION HISTORY
# Semantic Versioning: MAJOR.MINOR.PATCH-label
# Format: [Version] - YYYY-MM-DD - Release Name - Summary

================================================================================
LEGEND:
---
[v0.11.0-beta] - 2023-11-23 - "Phase 11: Laugh Starter Integration"
---
NEW FEATURES:
  • Integrated LaughStarterModal into SessionPage for first-time user onboarding
  • ShareLaughDialog appears post-session (3+ laughs) for community contributions
  • First-time detection via localStorage (hasSeenLaughStarter flag)
  • Automated version management: bump-version.js script with semver + Git tagging
  • Version display in Settings page footer (version, build date, commit link)

COMPONENTS INTEGRATED:
  • SessionPage.tsx: Added LaughStarterModal + ShareLaughDialog state management
  • SessionRecorder.tsx: Added onSessionComplete callback support
  • SettingsPage.tsx: Version footer with GitHub commit link

FIXES:
  • Resolved Vite plugin ESM compatibility (removed vite-plugin-version.cjs)
  • Simplified version injection (manual update until pre-build script created)

TECHNICAL:
  • Build optimization: 2.4MB bundle, 605KB gzipped
  • Version automation ready (manual trigger for now)
  • All Phase 11 components ready for Supabase migration

DEPLOYMENT STATUS:
  ⚠️ Manual steps required: Supabase migration + storage bucket creation (see PHASE_11_COMPLETION_CHECKLIST.txt)

BUILD STATUS: ✅ Passed (bundle: 2.4MB, gzipped: 605KB)

---
[v0.10.0-beta] - 2023-11-23 - "Laugh Starter"
---
NEW FEATURES:
  • Laugh Starter onboarding feature (play sample laughs to new users)
  • LaughClipExtractor service (AI-scored 3s clip extraction + normalization)
  • Database: laugh_clips table with approval workflow
  • Components: LaughStarterModal, LaughPlayer, useLaughStarter hook
  • Glassmorphism UI with Stitch design system

TECHNICAL:
  • Created migrations/20231123_laugh_clips.sql
  • RLS policies for public read (approved clips) + user contributions
  • Audio normalization to -3dB peak, MP3 export at 128kbps
  • Sequential audio playback with animated waveform visualization

INTEGRATION STATUS:
  ⚠️ Pending: Manual DB migration, storage bucket creation, SessionPage integration

BUILD STATUS: ✅ Passed (bundle: 2.38MB gzipped: 600KB)

---
[v0.9.0-beta] - 2023-11-23 - "AI Laugh Detection"
---
NEW FEATURES:
  • YAMNet ML model integration (Google's audio classification)
  • Hybrid detection system: Volume gating → AI classification
  • Detects 6 laugh types: laughter, baby laughter, giggle, snicker, belly laugh, chuckle
  • AI probability threshold: 0.3 (30% confidence)

TECHNICAL:
  • Installed @tensorflow/tfjs (36 packages, +1.2MB to bundle)
  • Created YamnetService singleton (model loading + inference)
  • Created useYamnet React hook
  • Updated useAudioRecorder with hybrid AI + volume detection
  • Increased analyser FFT size to 1024 for better AI resolution

PERFORMANCE:
  • Model loads on first session start (~5s download, 17MB)
  • Inference runs every 100ms on 1024-sample audio chunks
  • Graceful fallback to volume-only detection if model fails

BUILD STATUS: ✅ Passed (bundle: 2.38MB)
DEPLOYMENT: ✅ GitHub (commit: d8a0dd0)

---
[v0.8.0-beta] - 2023-11-23 - "Stitch Visual Overhaul"
---
NEW FEATURES:
  • Tailwind CSS v4 migration (zero-config, faster builds)
  • "Stitch" design system (dark mode, glassmorphism, vibrant gradients)
  • Custom color palette: Deep Space Blue + Electric Indigo
  • Typography: Outfit (headings) + Inter (UI text)

COMPONENTS REFACTORED:
  • Header.tsx: Glassmorphism nav, gradient logo text
  • Dashboard.tsx: Glass panels, updated chart styling
  • SettingsPage.tsx: Glass sections, modernized controls

CSS ARCHITECTURE:
  • src/index.css: @import "tailwindcss" (v4 syntax)
  • @theme block for color variables
  • @layer components for .glass-panel, .btn-primary utilities

BUILD STATUS: ✅ Passed
DEPLOYMENT: ✅ GitHub (commit: e9cfc0b)

---
[v0.7.0-beta] - 2023-11-22 - "Settings & User Preferences"
---
NEW FEATURES:
  • Settings page with audio threshold control (0-100)
  • Dark mode toggle (light/system/dark)
  • User preferences stored in Supabase profiles.settings (JSONB)
  • SettingsContext for global state management
  • Audio recorder now respects user-defined threshold

DATABASE CHANGES:
  • Migration: SETTINGS_MIGRATION.sql (add settings column to profiles)
  • Default settings: { theme: 'dark', audio: { threshold: 50, sampleRate: 48000 } }

TECHNICAL:
  • Created src/context/SettingsContext.tsx
  • Created src/pages/SettingsPage.tsx
  • Integrated settings into useAudioRecorder.ts
  • Added Settings link to Header navigation

BUILD STATUS: ✅ Passed
DEPLOYMENT: ✅ GitHub (commit: [previous])

---
[v0.6.0-beta] - 2023-11-21 - "Testing Infrastructure"
---
NEW FEATURES:
  • Vitest testing framework integration
  • Test runner script (scripts/run-tests.js) with real-time output
  • Setup file for jest-dom assertions
  • Sample test: App.test.tsx

FIXES:
  • Pinned jsdom to v22.1.0 (resolved ERR_REQUIRE_ESM)
  • Fixed vite.config.ts: changed defineConfig import from 'vite' to 'vitest/config'
  • Removed `https: true` from server config (basicSsl plugin handles HTTPS)

BUILD STATUS: ✅ Passed
TEST STATUS: ✅ 1 passing

---
[v0.5.0-beta] - 2023-11-20 - "Audio Recorder v2.1"
---
NEW FEATURES:
  • Laugh detection V2.1: Reduced thresholds for higher sensitivity
  • LAUGH_DURATION_MIN: 100ms (catches any burst)
  • LAUGH_COOLDOWN: 500ms (rapid detection)
  • Improved debug logging for laugh events

FIXES:
  • Safari MIME type compatibility (audio/mp4 fallback)
  • AudioContext memory leak prevention (proper cleanup on unmount)
  • React 18 Strict Mode compliance (no double-creation)

TECHNICAL:
  • useAudioRecorder.ts: Gold standard implementation
  • MediaRecorder with Safari-compatible MIME type selection
  • Volume smoothing (0.8 factor) for stable UI animation

BUILD STATUS: ✅ Passed

---
[v0.4.0-beta] - 2023-11-19 - "Dashboard & Analytics"
---
NEW FEATURES:
  • Dashboard page with session statistics
  • Recharts integration (line chart for laugh trends)
  • Session history display (duration, laugh count, date)
  • Responsive grid layout for info cards

TECHNICAL:
  • Created src/pages/Dashboard.tsx
  • Integrated with useSessionManager for real data
  • Supabase query: sessions table grouped by date

BUILD STATUS: ✅ Passed

---
[v0.3.0-beta] - 2023-11-18 - "Session Recording"
---
NEW FEATURES:
  • Session management with start/pause/resume/end
  • Audio recording with MediaRecorder API
  • Supabase Storage upload (audio-recordings bucket)
  • IndexedDB fallback for offline recording
  • UUID-based session IDs

DATABASE CHANGES:
  • Created sessions table (duration, laugh_count, user_id)
  • Created recordings table (session_id, storage_path, mime_type)
  • RLS policies for user-scoped reads

TECHNICAL:
  • Created src/hooks/useSessionManager.ts
  • Created src/lib/db.ts (IndexedDB wrapper)
  • DEMO_MODE support (skip Supabase, save locally)

BUILD STATUS: ✅ Passed

---
[v0.2.0-beta] - 2023-11-17 - "Authentication"
---
NEW FEATURES:
  • Supabase authentication integration
  • Login/signup forms with validation
  • Protected routes (Dashboard, Sessions)
  • DEMO_MODE for development without auth

TECHNICAL:
  • Created src/context/AuthContext.tsx
  • Created src/lib/supabase.ts
  • React Router v6 with auth-gated routes

BUILD STATUS: ✅ Passed

---
[v0.1.0-beta] - 2023-11-16 - "Project Foundation"
---
NEW FEATURES:
  • Vite + React 18 + TypeScript setup
  • Tailwind CSS v4 configuration
  • React Router v6 navigation
  • Basic layout: Header, MainLayout
  • Landing page placeholder

TECHNICAL:
  • Project structure: src/{components, pages, hooks, lib, context}
  • ESLint + Prettier configuration
  • basicSsl plugin for HTTPS dev server

BUILD STATUS: ✅ Passed
DEPLOYMENT: ✅ Initial GitHub repo created

================================================================================
PRE-REBUILD LEGACY (Archived)
================================================================================

[v0.0.x] - 2023-Q3 - Original Lafter.org Prototype
  • Vanilla JS implementation (no framework)
  • Simple amplitude-based laugh detection
  • No persistence, no user accounts
  • Local storage only

DECISION TO REBUILD:
  • Codebase became unmaintainable (~3000 lines of spaghetti JS)
  • No testing, no TypeScript, no component architecture
  • Audio engine had Safari compatibility issues
  • Needed professional foundation for future growth

================================================================================
END OF VERSION HISTORY
================================================================================

NOTES:
  - All v0.x.x versions are considered BETA (not production-ready)
  - Version 1.0 release criteria defined in ROADMAP.txt
  - Breaking changes will increment MAJOR version (e.g., 0.x → 1.0)
  - Feature additions increment MINOR version (e.g., 0.9 → 0.10)
  - Bug fixes increment PATCH version (e.g., 0.9.1 → 0.9.2)

DEPLOYMENT TRACKING:
  - Each version tagged in Git: `git tag v0.10.0-beta`
  - Deployment verified on: https://lafter-org.vercel.app (or custom domain)
  - Production deployments trigger via GitHub push to `main` branch
